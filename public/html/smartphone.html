<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-R16CHR88MG"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-R16CHR88MG');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" type="text/css" href="../css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
    <script type="text/javascript" src="../js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../js/buy_app_smartphone.js"></script>
    <script type="text/javascript" src="../js/auth.js"></script>
    <title>Смартфон</title>
</head>

<body>
    <style>
        .menu {
   width: 960px;
   margin: 0 auto;
   margin-right: 0;
}

.menu:before {
  content: '';
  display: block;
  height: 50px;
  width: 100%;
  background: #000;
  position: absolute;
  left: 0;
  z-index: -1;
  top: 0;
}

.menu-ul {
  margin: 0;
  padding: 0;
  list-style: none;
  height: 50px;
}

.menu-ul-li {
  float: left;
}

.menu-ul-li-admin {
  float: right;
}

.menu-ul-li-a,
.auth-red,
.auth-green {
  color: #fff;
  display: block;
  height: 50px;
  padding: 0 30px;
  text-transform: uppercase;
  text-decoration: none;
  line-height: 50px;
}

.menu-ul-li-a:hover {
  background: #d34d43;
  text-decoration: none;
  color: black;
}

.auth-red:hover {
  border: red solid 2px;
  border-radius: 100px;
  text-decoration: none;
  color: black;
}

.auth-green:hover {
  border: green solid 2px;
  border-radius: 100px;
  text-decoration: none;
  color: black;
}

        .row {
            width: 100%;
        }

        .containet {
            margin-top: 5px;
        }

        .but1 {
            margin-top: 0;
            margin-bottom: 0;
            margin-left: 0;
        }

        .but2 {
            margin-top: 0;
            margin-bottom: 20px;
            margin-left: 420px;
        }

        .con_photo {
            margin-left: 30px;
            margin-right: 10px;
            margin-top: 20px;
            margin-bottom: 20px;
            height: auto;
            width: 30%;
            cursor: pointer;
        }


        .con_mai {
            margin-left: 5px;
            margin-right: 5px;
            margin-top: 20px;
            margin-bottom: 20px;
            height: auto;
            width: 35%;
            border: solid green 5px;
            border-radius: 50px;
        }

        .con_user {
            margin-left: 5px;
            margin-right: 5px;
            margin-top: 20px;
            margin-bottom: 20px;
            height: auto;
            width: 30%;
            
        }
    </style>
    <header class="menu">
        <ul class="menu-ul">
            <li class="menu-ul-li"><a href="../../index.html" class="menu-ul-li-a">Головна</a></li>
            <li class="menu-ul-li"><a href="buy.html" class="menu-ul-li-a">Купити</a></li>
            <li class="menu-ul-li"><a href="sell.html" class="menu-ul-li-a">Продати</a></li>
            <li class="menu-ul-li"><a href="contacts.html" class="menu-ul-li-a">Контакти</a></li>
        </ul>
    </header>
    <div id="main">

        <section class="containor-fluid" id="">

            <div class="row">

                <div style="text-align:center" class="con_photo" id="">
                    <div><button style="float:left" type="submit" class="btn btn-dark but3" id="back">Назад</button></div>

                </div>
                <div style="text-align:center" class="con_mai" id="">

                </div>

                <div style="text-align:center" class="con_user" id="">

                </div>

            </div>

        </section>

    </div>

    <script>
        let smartphone = null;
        let user = null;
        let i = 1;

        $(document).ready(function (e) {
            let a = document.location.search;
            let id = a.split("?")[1];
            getSmartphone(id);
        });



        function getSmartphone(id) {
            $.ajax({
                url: "https://murmuring-earth-34683.herokuapp.com/smartphone/" + id,
                method: 'GET',
                dataType: 'json',
                success: function (result) {

                    user = {
                        "firstName": result.phoneUser.firstName,
                        "lastName": result.phoneUser.lastName,
                        "email": result.phoneUser.email,
                        "phoneNumber": result.phoneUser.phoneNumber
                    };

                    smartphone = {
                        "manufacturer": result.manufacturer,
                        "model": result.model,
                        "displayDiagonal": result.displayDiagonal,
                        "resolutionDisplay": result.resolutionDisplay,
                        "driveCapacity": result.driveCapacity,
                        "ram": result.ram,
                        "coreNumber": result.coreNumber,
                        "numberSim": result.numberSim,
                        "frontalCamera": result.frontalCamera,
                        "mainCamera": result.mainCamera,
                        "flash": result.flash,
                        "autofocus": result.autofocus,
                        "os": result.os,
                        "maxFlashMemory": result.maxFlashMemory,
                        "frequency": result.frequency,
                        "batteryCapacity": result.batteryCapacity,
                        "color": result.color,
                        "weight": result.weight,
                        "dimensionsWidth": result.dimensionsWidth,
                        "dimensionsHeight": result.dimensionsHeight,
                        "dimensionsLength": result.dimensionsLength,
                        "price": result.price,
                        "additional": result.additional,
                        "description": result.description,
                        "image1": result.imageUrl1,
                        "image2": result.imageUrl2,
                        "image3": result.imageUrl3,
                        "image4": result.imageUrl4,
                        "image5": result.imageUrl5,
                        "phoneUser": user
                    };

                    $('.con_photo').append(
                        '<img id="photo_img1" style="height:400px;max-width:90%;margin-top:15px" src="' + smartphone.image1 + '" alt="">'
                        + '<img id="photo_img2" style="height:400px;max-width:90%;margin-top:15px" src="' + smartphone.image2 + '" alt="">'
                        + '<img id="photo_img3" style="height:400px;max-width:90%;margin-top:15px" src="' + smartphone.image3 + '" alt="">'
                        + '<img id="photo_img4" style="height:400px;max-width:90%;margin-top:15px" src="' + smartphone.image4 + '" alt="">'
                        + '<img id="photo_img5" style="height:400px;max-width:90%;margin-top:15px" src="' + smartphone.image5 + '" alt="">'
                    );

                    $('.con_mai').append(
                        '<h3 style="color:green">' + smartphone.manufacturer + " " + smartphone.model + '</h3>'
                        + '<h5 style="text-align:left;margin-left:5px;"><b style="color:blue">Дисплей:</b> Діагональ : ' + smartphone.displayDiagonal + '", Розширення: '
                        + smartphone.resolutionDisplay + 'пкс.</h5>'
                        + '<h5 style="text-align:left;margin-left:5px;"><b style="color:blue">Пам\'ять :</b> Влаштована : ' + smartphone.driveCapacity + ', Оперативна: ' + smartphone.ram + '</h5>'
                        + '<h5 style="text-align:left;margin-left:5px;"><b style="color:blue">Кількість :</b> Ядер : ' + smartphone.coreNumber + ', Sim-карт: ' + smartphone.numberSim + '</h5>'
                        + '<h5 style="text-align:left;margin-left:5px;"><b style="color:blue">Камера :</b> Фронтальна : ' + smartphone.frontalCamera + ', Головна: ' + smartphone.mainCamera +
                        ', Вспишка: ' + smartphone.flash + ', Автофокус: ' + smartphone.autofocus + '</h5>'
                        + '<h5 style="text-align:left;margin-left:5px;"><b style="color:blue">Батарея :</b> ' + smartphone.batteryCapacity + '</h5>'
                        + '<h5 style="text-align:left;margin-left:5px;"><b style="color:blue">Додаткова інформація:</b> Операційна система : ' + smartphone.os + ', Карта пам\'яті(макс.) : ' + smartphone.maxFlashMemory +
                        ', Частота ядра : ' + smartphone.frequency + 'Ггц.</h5>'
                        + '<h5 style="text-align:left;margin-left:5px;"><b style="color:blue">Зовнішній вигляд:</b> Коляр : ' + smartphone.color + ', Вага: ' + smartphone.weight + 'гр., Розміри: '
                        + smartphone.dimensionsLength + 'x' + smartphone.dimensionsWidth + 'x' + smartphone.dimensionsHeight + 'мм., ' + smartphone.description + '</h5>'
                        + '<h5 style="text-align:left;margin-left:5px;"><b style="color:blue">Доповнення:</b> ' + smartphone.additional + '</h5>'
                        + '<h4 style="text-align:center;margin-left:5px;"><b style="color:red">Ціна:</b> ' + smartphone.price + ' грн.</h4>'
                    );
                    $('.con_user').append(
                        '<h3 style="color:green">' + 'Продавець' + '</h3>'
                        + '<h4 style="text-align:left;margin-left:10px;"><b style="color:blue">П.І:</b> ' + '</h4>'
                        + '<h4 style="text-align:left;margin-left:10px;">' + result.phoneUser.firstName + ' ' + result.phoneUser.lastName + '</h4>'
                        + '<h4 style="text-align:left;margin-left:10px;"><b style="color:blue">Email:</b> ' + '</h4>'
                        + '<h4 style="text-align:left;margin-left:10px;">' + result.phoneUser.email + '</h4>'
                        + '<br><input id="delete" type="submit" value="Видалити" class="btn btn-danger"><br>'
                        + '<br><input type="submit" id="update" value="Оновити" class="btn btn-primary"><br>'
                    );

                    if (window.localStorage.getItem('userId') === result.phoneUser.userId || window.localStorage.getItem('auth_role') === 'ROLE_ADMIN') {
                        $('#delete').show();
                        $('#update').show();
                    }
                    else {
                        $('#delete').hide();
                        $('#update').hide();
                    }

                    $('#update').on('click', function () {
                        location = ("href", "administration/smartphoneUpdate.html?" + result.phoneId + "?phone");
                    });

                    $('#delete').on('click', function () {
                        deleteItem(result.phoneId);
                    });

                    $('#photo_img2').hide();
                    $('#photo_img3').hide();
                    $('#photo_img4').hide();
                    $('#photo_img5').hide();
                    console.log(smartphone);
                    $('img').on('click', function () {
                        if (i === 5) {
                            i -= 5;
                        }

                        i++;

                        if (i === 1) {
                            $('#photo_img1').show();
                            $('#photo_img2').hide();
                            $('#photo_img3').hide();
                            $('#photo_img4').hide();
                            $('#photo_img5').hide();
                        }
                        if (i === 2) {
                            if (smartphone.image2 === '' || smartphone.image2 === null) {
                                $('#photo_img1').show();
                                $('#photo_img2').hide();
                                $('#photo_img3').hide();
                                $('#photo_img4').hide();
                                $('#photo_img5').hide();
                                i -= 1;
                            }
                            else {
                                $('#photo_img1').hide();
                                $('#photo_img2').show();
                                $('#photo_img3').hide();
                                $('#photo_img4').hide();
                                $('#photo_img5').hide();
                            }
                        }
                        if (i === 3) {
                            if (smartphone.image3 === '' || smartphone.image3 === null) {
                                $('#photo_img1').show();
                                $('#photo_img2').hide();
                                $('#photo_img3').hide();
                                $('#photo_img4').hide();
                                $('#photo_img5').hide();
                                i -= 2;
                            }
                            else {
                                $('#photo_img1').hide();
                                $('#photo_img2').hide();
                                $('#photo_img3').show();
                                $('#photo_img4').hide();
                                $('#photo_img5').hide();
                            }
                        }
                        if (i === 4) {
                            if (smartphone.image4 === '' || smartphone.image4 === null) {
                                $('#photo_img1').show();
                                $('#photo_img2').hide();
                                $('#photo_img3').hide();
                                $('#photo_img4').hide();
                                $('#photo_img5').hide();
                                i -= 3;
                            }
                            else {
                                $('#photo_img1').hide();
                                $('#photo_img2').hide();
                                $('#photo_img3').hide();
                                $('#photo_img4').show();
                                $('#photo_img5').hide();
                            }
                        }
                        if (i === 5) {
                            if (smartphone.image5 === '' || smartphone.image5 === null) {
                                $('#photo_img1').show();
                                $('#photo_img2').hide();
                                $('#photo_img3').hide();
                                $('#photo_img4').hide();
                                $('#photo_img5').hide();
                                i -= 4;
                            }
                            else {
                                $('#photo_img1').hide();
                                $('#photo_img2').hide();
                                $('#photo_img3').hide();
                                $('#photo_img4').hide();
                                $('#photo_img5').show();
                            }
                        }
                    });
                }
            })
        }
        function deleteItem(smartphoneId) {
            $.ajax({
                url: "https://murmuring-earth-34683.herokuapp.com/smartphone/" + smartphoneId,
                method: 'DELETE',
                dataType: 'json',
                complete: function (result) {
                    location = ("href", "buy.html");
                }
            });
        }
    </script>
</body>

</html>
